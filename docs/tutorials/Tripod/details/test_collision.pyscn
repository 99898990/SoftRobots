from stlib.scene import MainHeader, ContactHeader, get
from stlib.solver import DefaultSolver
from parts import ElasticBody, addCollisionTo

def Model(parentNode):
    model = parentNode.createChild("Model")
    #DefaultSolver(model)    
    
    eb = ElasticBody(model)
    em  = get(eb, "ElasticMaterialObject")
    eb.createObject("EulerImplicit")
    eb.createObject("SparseLDLSolver")
    addCollisionTo(eb)    

    return model 
    
def SimulationPlan(parentNode, model):
    simu = parentNode.createChild("SimulationPlan")
    ContactHeader(simu, alarmDistance=1.0, contactDistance=0.1)
    parentNode.addChild(model)
    return simu    

def createScene(root):
    """In this scene I'm trying to understand how contact should be managed in 
       an understandable way
    """
    MainHeader(root)
    get(root, "VisualStyle.displayFlags").value = "showForceFields"
    
    #ContactHeader(root, alarmDistance=1.0, contactDistance=0.1)

    model = Model(root)
    #SimulationPlan(root, model)
    
    
    
    
    
